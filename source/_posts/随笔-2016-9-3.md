---
title: 随笔 - 2016/9/3
date: 2016-09-03 18:50:32
categories: 随笔
tags: 
  - 随笔
---

最近忙着找工作的事情, 好久没更博客了, B站的视频也一直没更(下一个视频打算聊聊复杂度, 其实博客上那篇讲复杂度的算是一个讲稿), 今天上来随便说说最近找工作的事.

找工作已经折腾一个月了, offer没拿到, 尽是拒信了. Google电面虽然加面了一轮, 然而依然gg, 腾讯携程根本没理我(携程还发了个拒信...), 阿里电面聊得很开心但是迷之gg, 网易等了好久, 最后还是挂了, 大概挂HR?(比我强的也没过, 比我菜的过了...问了伟神那边也是一样的情况...感觉好迷). 今天聊聊面试的问题.

---

问: 什么是闭包?

大概是必问题吧. 一般的解释就是能访问其他函数作用域中变量的函数. 这个概念我现在也还是不是非常清晰, 因为从百度百科以及一些书上的看到的内容上来看. 这个函数除了要能访问其他作用域中的变量, 还需要能被其他函数作用域之外引用.
```javascript
function a() {
    var x = 10;
    function b() {
        console.log(x);
    }
    return b;
}
var y = a();
y();
```
<!-- more -->

如上面代码中函数`a()`返回了内部的函数`b()`, 使得`y`能够引用内部函数`b()`. 按百度百科的解释, 闭包的作用是使得GC不会回收函数`a()`运行时占用的资源(也就是`a()`的活动对象). 那么如果不返回内部函数`b()`或者不将`b()`赋值给`y`, 这样`b()`就能被直接回收, 是否就意味着`b()`不是一个闭包呢? 如下面的代码:
```javascript
function a() {
    var x = 10;
    function b() {
        console.log(x);
    }
    return b;
}
a();    // 这里不保持对内部函数的引用
```

那么如果没有直接访问外部函数的内容算不算闭包呢? 比如:
```javascript
function a() {
    var x = 10;
    function b() {
        console.log(1); // 这里不访问x
    }
    return b;
}
var y = a();
y();
```

要知道这样的代码, 在chrome中`a()`的活动对象是会被回收的, 而在IE中不能被回收.
这样又算不算呢?
```javascript
function a() {
    var x = 10;
    function b() {
        console.log(1); // 这里不访问x
    }
    function c() {
        console.log(x); // 这里访问x, 但c()没有使用
    }
    return b;   // 只返回b
}
var y = a();
y();
```

这样的代码中`a()`的活动对象无法被回收.
于是到底闭包和GC有没有必然联系呢, 闭包严格的定义到底是怎样的呢, 这是我接下来急需解决的问题.


问: 闭包是否会造成内存泄漏, 如何调试并发现内存泄漏?

闭包会造成的内存泄漏, 详细的内容可以查看[这里](http://www.cnblogs.com/friskfly/p/3171834.html), 关于里面一些代码的GC, 不同浏览器可能不同, [这里](http://www.cnblogs.com/syf/archive/2012/10/06/2713256.html)有详细的测试, 关于V8中GC的详解, 可以看[这里](http://alinode.aliyun.com/blog/38).
调试的话在chrome中Developer Tools里有Timeline可以查看到内存的使用情况, Profiles里面可以打内存快照查看详情.


问: 解释下作用域链和原型链.

这个还是记下红宝书上的图吧, 感觉不好说, 面试官跟我咬文嚼字半天.


问: 有没有用过什么第三方抓包工具?

这个是接着调试后面问的. 要形容我当时的状态大概是: 喵喵喵???


问: 如何左右垂直居中?

block\inline元素做法不同, 方法也非常多, 搜一下一大片.


问: 如何优化网页性能?

这个问题问得非常宽, 因为优化手段非常多, 而且技术角度不同. 如使用雪碧图, GZIP,  CDN, 使用代码混淆压缩工具, js标签放在html底部, 开启缓存机制等等. 关于这个黎酱推荐了两本书: 高性能网站建设指南, 高性能网站建设进阶指南.

问: 当得到新的数据, 如何与DOM中的内容比较并快速更新.

这个是聊项目的时候聊到的, 我当时项目中采用的是张荣铭写的那本JS设计模式中享元那种实现, 不过似乎面试官不太满意. 我在怀疑他让我答某些框架中的数据绑定方法?


问: 为什么JS操作DOM比较慢?

喵喵喵???(我当时答了一堆页面渲染流程).


其他问题都是CSS3, HTML5有些什么新特性, 了不了解ES6, Angular, React, Node之类的, 前者随便答了下, 后者没怎么了解所以没深入问, 但是可以看出也是必问的.

网易技术面给我的感觉是网易主要还是在做网页效果, 更看重一些效果的实现和网页性能, 框架和浏览器底层的原理似乎不太关心. 这点上阿里巴巴似乎完全不同, 关于GC的介绍等很多都是阿里人的文章, 这大概是因为阿里搞Node所以对V8了解更深入, 更重视底层吧. 还真是羡慕呢, 可惜人招的少.